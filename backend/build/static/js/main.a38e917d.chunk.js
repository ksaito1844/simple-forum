(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{107:function(e,t,n){e.exports=n(139)},138:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),o=n.n(c),u=n(11),i=n.n(u),s=n(8),l=n(19),m=n(179),d=n(32),p=n(87),f=n(95),b=Object(f.a)({palette:{primary:{main:"#CBF3F0"},secondary:{main:"#FFBF69"},error:{main:"#FF9F1C"},success:{main:"#2EC4B6"},grey:{main:"#BDC3C7",secondary:"#f6f7f8"}}}),v=n(22),g=n(24),h=n(91),E=n.n(h),O=n(25),j=n(4),y=n.n(j),w=n(9),x=n(30),k=n(28),C=n.n(k),I="/api/blogs",N=null,S=function(){var e=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get(I);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(w.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(I,"/").concat(t,"/comments"),e.next=3,C.a.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(w.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:N}},e.next=3,C.a.post(I,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(w.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:N}},a="".concat(I,"/").concat(t._id),e.next=4,C.a.put(a,t,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(w.a)(y.a.mark((function e(t,n){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(I,"/").concat(n,"/comments"),e.next=3,C.a.post(a,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P={getAll:S,getComments:B,create:T,put:R,remove:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:N}},a="".concat(I,"/").concat(t.id),e.next=4,C.a.delete(a,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){N="bearer ".concat(e)},comment:A},D=Object(g.c)({sortComparer:function(e,t){return t.date.localeCompare(e.date)}}),F=D.getInitialState({status:"idle",error:null,sortBy:"date"}),L=Object(g.b)("posts/fetchPosts",Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.getAll(),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))),W=Object(g.b)("posts/addNewPost",function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=P.create(t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(g.b)("posts/likePost",function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.put(t);case 2:return n=e.sent,e.abrupt("return",{id:n.id,changes:{likes:n.likes}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=Object(g.b)("posts/removePost",function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.remove(t);case 2:return e.abrupt("return",t.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=Object(g.d)({name:"posts",initialState:F,reducers:{addCommentToPost:{reducer:function(e,t){var n=t.payload,a=n.postId,r=n.commentId,c=e.entities[a];c&&c.comments.push({id:r})}}},extraReducers:(a={},Object(O.a)(a,L.pending,(function(e){e.status="loading"})),Object(O.a)(a,L.fulfilled,(function(e,t){e.status="succeeded",D.upsertMany(e,t.payload)})),Object(O.a)(a,L.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(O.a)(a,W.fulfilled,D.addOne),Object(O.a)(a,G.fulfilled,D.updateOne),Object(O.a)(a,U.fulfilled,D.removeOne),a)}),z=_.reducer,q=_.actions,Y=q.addCommentToPost,J=(q.sortPostsByLikes,D.getSelectors((function(e){return e.posts}))),M=J.selectAll,V=J.selectById,H=(J.selectIds,Object(x.a)(M,(function(e,t){return t}),(function(e,t){return"likes"===t?e.sort((function(e,t){return t.likes-e.likes})).map((function(e){return e.id})):"comments"===t?e.sort((function(e,t){return t.comments.length-e.comments.length})).map((function(e){return e.id})):"recent"===t?e.sort((function(e,t){return t.date.localeCompare(e.date)})).map((function(e){return e.id})):void 0}))),K=Object(g.c)({sortComparer:function(e,t){return t.date.localeCompare(e.date)}}),Q=K.getInitialState({status:"idle",error:null}),X=Object(g.b)("comments/fetchComments",function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.getComments(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Z=Object(g.b)("posts/addComment",function(){var e=Object(w.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.comment(t.newComment,t.postId);case 2:return a=e.sent,e.next=5,n.dispatch(Y({postId:t.postId,commentId:a.id}));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),$=Object(g.d)({name:"comments",initialState:Q,reducers:{},extraReducers:(r={},Object(O.a)(r,X.pending,(function(e){e.status="loading"})),Object(O.a)(r,X.fulfilled,(function(e,t){e.status="succeeded",K.upsertMany(e,t.payload)})),Object(O.a)(r,X.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(O.a)(r,Z.fulfilled,K.addOne),r)}).reducer,ee=K.getSelectors((function(e){return e.comments})),te=(ee.selectAll,ee.selectById),ne=ee.selectIds,ae=Object(x.a)([ne,function(e,t){return t.map((function(e){return e.id}))}],(function(e,t){return e.filter((function(e){return t.includes(e)}))})),re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=Object(w.a)(y.a.mark((function a(r){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"NEW_NOTIFICATION",message:e,isError:n}),a.abrupt("return",new Promise((function(e){setTimeout((function(){r({type:"NEW_NOTIFICATION",message:"",isError:!1})}),t)})));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:"",isError:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_NOTIFICATION":return t;default:return e}},oe={login:function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ue={getAll:function(){var e=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),register:function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ie=function(e,t){return function(){var n=Object(w.a)(y.a.mark((function n(a){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,oe.login({username:e,password:t});case 2:r=n.sent,a({type:"LOGIN",data:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},se=function(e,t,n){return function(){var a=Object(w.a)(y.a.mark((function a(r){var c;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ue.register({name:e,username:t,password:n});case 2:c=a.sent,console.log(c),r({type:"REGISTER",data:c});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGOUT":case"REGISTER":case"ALREADY_LOGGED_IN":return t.data;default:return e}},me=function(){return function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},pe=Object(v.c)({posts:z,comments:$,notification:ce,user:le,users:de}),fe={key:"root",version:1,storage:E.a},be=Object(d.g)(fe,pe),ve=Object(g.a)({reducer:be,middleware:Object(g.e)({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})}),ge=n(15),he=n(175),Ee=n(174),Oe=n(18),je=n(182),ye=n(180),we=n(142),xe={border:"1px solid #BDC3C7","&:hover":{border:"1px solid black"},marginBottom:16,borderRadius:3},ke=Object(we.a)((function(e){return{listItemContainer:{padding:24,border:xe.border,marginBottom:xe.marginBottom,"&:hover":xe["&:hover"],borderRadius:xe.borderRadius},listItem:{textDecoration:"none",color:"#000"},listItemSubtitle:{color:e.palette.grey.main},inputContainer:{paddingLeft:12,paddingRight:12,paddingTop:8,paddingBottom:8,border:xe.border,marginBottom:xe.marginBottom,borderRadius:xe.borderRadius,textAlign:"center"},textField:{width:"75%",marginLeft:"auto",marginRight:"auto",backgroundColor:e.palette.grey.secondary},input:{border:"none"}}})),Ce=n(171),Ie=n(92),Ne=n.n(Ie),Se=n(93),Be=n.n(Se),Te=n(94),Re=n.n(Te),Ae=Object(we.a)((function(e){return{sortBarContainer:{padding:4,border:xe.border,marginBottom:xe.marginBottom,borderRadius:xe.borderRadius,display:"flex",alignItems:"center",justifyContent:"center","& button":{marginLeft:16,marginRight:16,"&:hover, &.Mui-focusVisible":{backgroundColor:e.palette.grey.secondary}}},activeButton:{color:e.palette.secondary.main,backgroundColor:e.palette.grey.secondary}}})),Pe=function(e){var t=e.setState,n=Object(c.useState)("recent"),a=Object(Oe.a)(n,2),r=a[0],u=a[1],i=Ae(),s=function(e){"sortItemsByComments"===e?(t("comments"),u("comments")):"sortItemsByLikes"===e?(t("likes"),u("likes")):(t("recent"),u("recent"))};return o.a.createElement(je.a,{className:i.sortBarContainer},o.a.createElement(Ce.a,{"aria-label":"sort-recent",onClick:function(){return s("default")},className:"recent"===r?i.activeButton:""},o.a.createElement(Ne.a,{fontSize:"large"})),o.a.createElement(Ce.a,{"aria-label":"sort-likes",onClick:function(){return s("sortItemsByLikes")},className:"likes"===r?i.activeButton:""},o.a.createElement(Be.a,{fontSize:"large"})),o.a.createElement(Ce.a,{"aria-label":"sort-comments",onClick:function(){return s("sortItemsByComments")},className:"comments"===r?i.activeButton:""},o.a.createElement(Re.a,{fontSize:"large"})))},De=n(173),Fe=n(188),Le=n(181),We=function(e){var t=e.timestamp,n="";if(t){var a=Object(Fe.a)(t),r=Object(Le.a)(a);n="".concat(r," ago")}return o.a.createElement("span",{title:t},"\xa0 ",o.a.createElement("i",null,n))},Ge=function(e){var t=e.blogId,n=ke(),a=Object(s.d)((function(e){return V(e,t)}));return o.a.createElement(l.b,{to:"/blogs/".concat(a.id),className:n.listItem},o.a.createElement(je.a,{className:n.listItemContainer},o.a.createElement(De.a,{variant:"body2"},"posted by ",a.author," ",o.a.createElement(We,{timestamp:a.date})),o.a.createElement(De.a,{variant:"h5"},a.title)))},Ue=function(){var e=Object(c.useState)("recent"),t=Object(Oe.a)(e,2),n=t[0],a=t[1],r=ke(),u=Object(ge.f)(),i=Object(s.d)((function(e){return H(e,n)}));return o.a.createElement("div",null,o.a.createElement(je.a,{className:r.inputContainer},o.a.createElement(ye.a,{variant:"outlined",margin:"normal",required:!0,id:"newPost",type:"text",label:"Create Post",name:"New Post",autoComplete:"on",className:r.textField,onFocus:function(){return u.push("/create")}})),o.a.createElement(Pe,{setState:a}),i.map((function(e){return o.a.createElement(Ge,{key:e,blogId:e})})))},_e=(n(138),n(185)),ze=n(183),qe=function(){var e=Object(c.useState)(!1),t=Object(Oe.a)(e,2),n=t[0],a=t[1],r=Object(s.d)((function(e){return e.notification.message})),u=Object(s.d)((function(e){return e.notification.isError}));Object(c.useEffect)((function(){""!==r&&a(!0)}),[r]);var i=function(e,t){"clickaway"!==t&&a(!1)};return""===r?null:o.a.createElement(_e.a,{open:n,autoHideDuration:6e3,onClose:i},o.a.createElement(ze.a,{onClose:i,severity:u?"error":"success"},r))},Ye=n(52),Je=n(176),Me=Object(Ee.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},button:{margin:e.spacing(3,0,2)}}})),Ve=function(e){var t=e.user,n=Object(c.useState)({title:"",post:""}),a=Object(Oe.a)(n,2),r=a[0],u=a[1],i=Object(s.c)(),l=Object(ge.f)(),m=Me();return o.a.createElement(he.a,{maxWidth:"sm"},o.a.createElement("div",{className:m.paper},o.a.createElement(De.a,{component:"h1",variant:"h5"},"New Post"),o.a.createElement("form",{className:m.form,onSubmit:function(e){e.preventDefault();var n={title:r.title,post:r.post,author:t};i(W(n)),i(re('Your new blog titled: "'.concat(n.title,'" has been added to the server!'),3e3)),u({title:"",post:""}),l.push("/")}},o.a.createElement(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",placeholder:"Title",type:"text",value:r.title,name:"Title",autoComplete:"on",autoFocus:!0,onChange:function(e){var t=e.target;return u((function(e){return Object(Ye.a)(Object(Ye.a)({},e),{},{title:t.value})}))}}),o.a.createElement(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"post",placeholder:"Say something wonderful!",type:"text",value:r.post,name:"Post",multiline:!0,rows:10,size:"medium",onChange:function(e){var t=e.target;return u((function(e){return Object(Ye.a)(Object(Ye.a)({},e),{},{post:t.value})}))},autoComplete:"on"}),o.a.createElement(Je.a,{fullWidth:!0,variant:"contained",color:"primary",className:m.button,type:"submit",id:"login-button"},"Submit"))))},He=function(e){var t=e.user;return o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement(l.b,{to:"users/".concat(t.id)},t.name),":"," ",o.a.createElement("strong",null,"blogs created:")," ",t.blogs.length))},Ke=function(){var e=Object(c.useState)([]),t=Object(Oe.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){ue.getAll().then((function(e){a(e)})).catch((function(e){console.log("something went wrong!"),console.log(e)}))}),[]),o.a.createElement("div",null,o.a.createElement("h1",null,"Users"),o.a.createElement("hr",null),o.a.createElement("div",null,n.map((function(e){return o.a.createElement(He,{key:e.id,user:e})}))))},Qe=function(e){var t=e.user,n=Object(s.d)((function(e){return e.blogs})).filter((function(e){return e.author===t.name}));return o.a.createElement("div",null,o.a.createElement("h2",null,t.username),o.a.createElement("br",null),o.a.createElement("hr",null),o.a.createElement("div",null,o.a.createElement("h4",null,"Information:"),o.a.createElement("br",null),o.a.createElement("p",null,o.a.createElement("strong",null,"Name:")," ",t.name),o.a.createElement("br",null),o.a.createElement("h4",null,"Blog Posts:"),o.a.createElement("br",null),o.a.createElement("ul",null,n.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(Ge,{blog:e}))})))))},Xe=Object(we.a)((function(e){return{comment:{marginLeft:16},author:{fontSize:14,"& span":{color:e.palette.grey.main}}}})),Ze=function(e){var t=e.commentId,n=Object(s.d)((function(e){return te(e,t)})),a=Xe();return o.a.createElement("div",{style:{borderBottom:"1px solid black",marginBottom:"1em"},className:a.comment},o.a.createElement("p",{className:a.author},n.author," ",o.a.createElement(We,{timestamp:n.date})),o.a.createElement("p",null,n.content))},$e=Object(s.b)((function(e){return{user:e.user}}))((function(e){var t=e.blogId,n=e.blogComments,a=e.user,r=Object(c.useState)(""),u=Object(Oe.a)(r,2),i=u[0],l=u[1],m=Object(s.c)();Object(c.useEffect)((function(){m(X(t))}),[t,m]);var d=Object(s.d)((function(e){return ae(e,n)}));return o.a.createElement("div",null,o.a.createElement("h3",null,"Comments:"),o.a.createElement("form",{onSubmit:function(e){!function(e,t){e.preventDefault();var n={content:i,user:a.id};m(Z({postId:t,newComment:n})),m(re("Your comment has been added",3e3)),l("")}(e,t)}},o.a.createElement("input",{type:"text",name:"comment",value:i,onChange:function(e){var t=e.target;return l(t.value)}}),o.a.createElement("button",{type:"submit"},"add comment")),o.a.createElement("hr",null),d&&d.map((function(e){return o.a.createElement(Ze,{key:e,commentId:e})})))})),et=Object(s.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,n=e.match,a=Object(s.c)(),r=Object(ge.f)(),c=n.params.id,u=Object(s.d)((function(e){return V(e,c)})),i=function(){var e=Object(w.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.user.id===t.id){e.next=5;break}return console.log(t.id),console.log(u),a(re("You are not authorized to delete this post",3e3,!0)),e.abrupt("return");case 5:window.confirm('Do you really want to delete "'.concat(u.title,'"?'))&&(n={id:u.id},a(U(n)),r.push("/"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement("h1",null,u.title),o.a.createElement("p",null,"posted by ",o.a.createElement(l.b,{to:"/users/".concat(u.user.id)},u.author)," at"," ")),o.a.createElement("p",null,u.post),o.a.createElement("br",null),o.a.createElement("p",null,"Likes: ",u.likes,o.a.createElement("button",{onClick:function(){var e={_id:u.id,likes:u.likes};a(G(e))},type:"button"},"like")),o.a.createElement("p",null),o.a.createElement("button",{onClick:i,type:"button"},"delete"),o.a.createElement($e,{blogId:u.id,blogComments:u.comments}))})),tt=n(186),nt=n(63),at=n.n(nt),rt=function(e){var t=Object(c.useState)(""),n=Object(Oe.a)(t,2),a=n[0],r=n[1],u=Object(c.useState)(""),i=Object(Oe.a)(u,2),m=i[0],d=i[1],p=Object(s.c)(),f=Object(ge.f)(),b=function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!0!==!0){e.next=17;break}return e.prev=3,p(re("You have successfully logged in!",3e3)),r(""),d(""),e.next=9,p(ie(a,m));case 9:f.push("/"),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),p(re("Incorrect credentials",3e3,!0)),r(""),d("");case 17:return e.abrupt("return",(function(){return!1}));case 18:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),v=Me();return o.a.createElement(he.a,{maxWidth:"xs"},o.a.createElement("div",{className:v.paper},o.a.createElement(tt.a,{className:v.avatar},o.a.createElement(at.a,null)),o.a.createElement(De.a,{component:"h1",variant:"h5"},"Sign in"),o.a.createElement("form",{className:v.form,onSubmit:b,noValidate:!0},o.a.createElement(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",type:"text",value:a,label:"Username",name:"Username",autoComplete:"on",autoFocus:!0,onChange:function(e){var t=e.target;return r(t.value)}}),o.a.createElement(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"password",type:"password",value:m,label:"Password",name:"Password",autoComplete:"on",onChange:function(e){var t=e.target;return d(t.value)}}),o.a.createElement(Je.a,{fullWidth:!0,variant:"contained",color:"primary",className:v.button,type:"submit",id:"login-button"},"Sign In"),"Don't have an account?",o.a.createElement(l.b,{to:"/register",style:{marginLeft:"1rem"}},"Register now"))))},ct=n(177),ot=n(178),ut=Object(Ee.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},navItem:{marginRight:e.spacing(2),textDecoration:"none",color:e.palette.secondary.main},avatar:{width:e.spacing(6),height:e.spacing(6),color:e.palette.getContrastText(e.palette.secondary.main),backgroundColor:e.palette.secondary.main},backgroundColor:"transparent",logoutButton:{"&:hover":{backgroundColor:"transparent"}}}})),it=function(){var e=Object(s.c)(),t=ut(),n=Object(s.d)((function(e){return e.user}));return o.a.createElement(ct.a,null,o.a.createElement(ot.a,null,o.a.createElement(De.a,{variant:"h5",className:t.title},o.a.createElement(l.b,{color:"secondary",to:"/",className:t.navItem},"Posts"),o.a.createElement(l.b,{color:"secondary",to:"/users",className:t.navItem},"Users")),o.a.createElement(tt.a,{className:t.avatar},o.a.createElement(De.a,{variant:"h5"},n.name[0])),o.a.createElement(Je.a,{className:t.logoutButton,color:"inherit",onClick:function(){e(function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT",data:null});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.localStorage.clear(),e(re("Successfully logged out!",3e3))}},"Logout")))},st=function(){var e=Object(c.useState)(""),t=Object(Oe.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),u=Object(Oe.a)(r,2),i=u[0],m=u[1],d=Object(c.useState)(""),p=Object(Oe.a)(d,2),f=p[0],b=p[1],v=Object(s.c)(),g=Object(ge.f)(),h=function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!0!==!0){e.next=21;break}return e.prev=3,g.push("/"),e.next=7,v(se(n,i,f));case 7:return e.next=9,v(me());case 9:return e.next=11,v(ie(i,f));case 11:v(re("You have successfully logged in!",3e3)),m(""),b(""),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(3),v(re("Incorrect credentials",3e3,!0)),m(""),b("");case 21:return e.abrupt("return",(function(){return!1}));case 22:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),E=Me();return o.a.createElement(he.a,{maxWidth:"xs"},o.a.createElement("div",{className:E.paper},o.a.createElement(tt.a,{className:E.avatar},o.a.createElement(at.a,null)),o.a.createElement(De.a,{component:"h1",variant:"h5"},"Register New Account"),o.a.createElement("form",{className:E.form,onSubmit:h,noValidate:!0},o.a.createElement(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",type:"text",value:n,label:"Name",name:"Name",autoComplete:"on",autoFocus:!0,onChange:function(e){var t=e.target;return a(t.value)}}),o.a.createElement(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",type:"text",value:i,label:"Username",name:"Username",autoComplete:"on",autoFocus:!0,onChange:function(e){var t=e.target;return m(t.value)}}),o.a.createElement(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"password",type:"password",value:f,label:"Password",name:"Password",autoComplete:"on",onChange:function(e){var t=e.target;return b(t.value)}}),o.a.createElement(Je.a,{fullWidth:!0,variant:"contained",color:"primary",className:E.button,type:"submit",id:"login-button"},"Sign In"),o.a.createElement(l.b,{to:"/"},"Back to login"))))},lt=function(){var e=Object(s.c)(),t=Object(s.d)((function(e){return e.user})),n=Object(s.d)((function(e){return Object.values(e.posts.entities)})),a=Object(s.d)((function(e){return e.users}));Object(c.useEffect)((function(){e(L())}),[e]),Object(c.useEffect)((function(){e(me())}),[e]),Object(c.useEffect)((function(){var t=window.localStorage.getItem("loggedInAppUser");if(t){var n=JSON.parse(t);e(function(e){return function(){var t=Object(w.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"ALREADY_LOGGED_IN",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n))}}),[e]),Object(c.useEffect)((function(){t&&(window.localStorage.setItem("loggedInAppUser",JSON.stringify(t)),P.setToken(t.token))}),[t]);var r=Object(ge.g)("/users/:id"),u=r?a.find((function(e){return e.id===r.params.id})):null,i=Object(ge.g)("/blogs/:id"),l=(i&&n.find((function(e){return e.id===i.params.id})),Object(Ee.a)((function(e){return{marginDiv:{marginTop:e.spacing(12)}}}))());return o.a.createElement("div",null,o.a.createElement(qe,{user:""}),null===t?o.a.createElement("div",null,o.a.createElement(ge.c,null,o.a.createElement(ge.a,{path:"/register"},o.a.createElement(st,null)),o.a.createElement(ge.a,{path:"/"},o.a.createElement(rt,null)))):o.a.createElement(he.a,{maxWidth:"md"},o.a.createElement(it,null),o.a.createElement("div",{className:l.marginDiv},o.a.createElement(ge.c,null,o.a.createElement(ge.a,{exact:!0,path:"/blogs/:id",component:et}),o.a.createElement(ge.a,{path:"/users/:id"},o.a.createElement(Qe,{user:u})),o.a.createElement(ge.a,{path:"/users"},o.a.createElement(Ke,null)),o.a.createElement(ge.a,{path:"/create"},o.a.createElement(Ve,{user:t})),o.a.createElement(ge.a,{path:"/register"},o.a.createElement(st,null)),o.a.createElement(ge.a,{exact:!0,path:"/",component:Ue})))))},mt=Object(d.h)(ve);i.a.render(o.a.createElement(l.a,null,o.a.createElement(s.a,{store:ve},o.a.createElement(p.a,{loading:null,persistor:mt},o.a.createElement(m.a,{theme:b},o.a.createElement(lt,null))))),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.a38e917d.chunk.js.map